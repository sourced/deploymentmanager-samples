# Example on how to use the network and subnetwork templates
#
# Variables:
#   RAND: Just a random string used mostly by the testing suite.
#

imports:
  - path: templates/network.py
  - path: templates/subnetwork.py

resources:
  - name: test-network-${RAND}
    type: templates/network.py
    properties:
      autoCreateSubnetworks: false
      subnetworks:
        - name: test-subnetwork-${RAND}-1
          region: us-east1
          ipCidrRange: 10.0.0.0/24
          privateIpGoogleAccess: false
          enableFlowLogs: true
          secondaryIpRanges:
            - rangeName: my-secondary-range-${RAND}-1
              ipCidrRange: 10.0.1.0/24
            - rangeName: my-secondary-range-${RAND}-2
              ipCidrRange: 10.0.2.0/24
  - name: test-subnetwork-${RAND}-2
    type: templates/subnetwork.py
    properties:
      network: $(ref.test-network-${RAND}.networkUrl)
      region: us-east1
      ipCidrRange: 192.168.0.0/16
  - name: test-subnetwork-${RAND}-3
    type: templates/subnetwork.py
    properties:
      name: test-subnetwork-${RAND}-3
      network: $(ref.test-network-${RAND}.networkUrl)
      region: us-east1
      ipCidrRange: 172.16.0.0/24
      privateIpGoogleAccess: false
      enableFlowLogs: true
      secondaryIpRanges:
        - rangeName: my-secondary-range-${RAND}-1
          ipCidrRange: 172.16.1.0/24
        - rangeName: my-secondary-range-${RAND}-2
          ipCidrRange: 172.16.2.0/24
