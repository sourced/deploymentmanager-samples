# Example on how to use the org policy template
#
# Variables:
#   FAAS_PROJECT_ID: The project ID, normally set at ~/.faas-tests.conf
#   RAND: Just a random string used mostly by the testing suite.

imports:
  - path: templates/org_policy.py
    name: org_policy.py

resources:
  - name: test-org-policy-${FAAS_PROJECT_ID}-${RAND}
    type: org_policy.py
    properties:
      projectId: ${FAAS_PROJECT_ID}
      policies:
        - constraint: constraints/compute.vmExternalIpAccess
          listPolicy:
            allValues: ALLOW
        - constraint: constraints/compute.disableNestedVirtualization
          booleanPolicy:
            enforced: true

