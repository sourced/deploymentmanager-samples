# Example on how to use the instance template
#
# In this example, a Ubuntu 18.04 instance with Nginx is created.
{% set environment = 'prod' %}
name: my-instance-{{environment}}-1
description: My instance deployment for {{environment}} environment

imports:
  - path: templates/instance/instance.py
    name: instance.py

resources:
  - name: my-instance-{{environment}}-1
    type: instance.py
    properties:
      zone: us-central1-a
      diskImage: projects/ubuntu-os-cloud/global/images/family/ubuntu-1804-lts
      diskSizeGb: 100
      machineType: f1-micro
      diskType: pd-ssd
      network: $(out.my-network-{{environment}}.my-network-{{environment}}.name)
      metadata:
        items:
          - key: startup-script
            value: sudo apt-get update && sudo apt-get install -y nginx
