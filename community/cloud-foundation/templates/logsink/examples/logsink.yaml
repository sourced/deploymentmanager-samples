# Example of the logsink template usage.
#
# In this example, log sinks are created with the various log destinations:
#   - a Cloud Storage bucket
#   - a PubSub topic
#   - a BigQuery dataset
imports:
  - path: templates/logsink/logsink.py
    name: logsink.py

resources:
  # Organization sink with a PubSub topic destination
  - name: test-org-logsink-pubsub
    type: logsink.py
    properties:
      # When using a PubSub topic, the value must be the topic ID. The ID must
      # contain only letters (a-z, A-Z), numbers (0-9), or underscores (_).
      # The maximum length is 1,024 characters.
      destinationName: test-topic
      destinationType: pubsub
      uniqueWriterIdentity: true

  # Billing account sink with a BigQuery dataset destination
  - name: test-billing-logsink-bq
    type: logsink.py
    properties:
      # When using a BQ dataset, the value must be the dataset ID. The ID must
      # contain only letters (a-z, A-Z), numbers (0-9), or underscores (_).
      # The maximum length is 1,024 characters.
      destinationName: test_dataset
      destinationType: bigquery
      uniqueWriterIdentity: true

  # Project sink with a Cloud Storage bucket destination
  - name: test-project-logsink-storage
    type: logsink.py
    properties:
      projectId: test-project-id
      destinationName: test-bucket
      destinationType: storage
      uniqueWriterIdentity: true

  # Folder sink with a Cloud Storage bucket destination
  - name: test-folder-logsink-storage
    type: logsink.py
    properties:
      folderId: "1234567890"
      destinationName: test-bucket
      destinationType: storage
      uniqueWriterIdentity: true
