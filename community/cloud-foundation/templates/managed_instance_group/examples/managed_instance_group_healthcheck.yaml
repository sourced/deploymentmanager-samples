# Example of the Managed Instance Group template usage.
#
# In this example, a regional managed instance group with attached health check
# is created.
# Replace the following placeholders with valid values:
#  <FIXME:healthCheckUri>: an URI of existing health check
#

imports:
  - path: templates/managed_instance_group/managed_instance_group.py
    name: managed_instance_group.py
  - path: templates/autoscaler/autoscaler.py
    name: autoscaler.py
  - path: templates/instance_template/instance_template.py
    name: instance_template.py

resources:
  - name: managed-instance-group-example-with-hc
    type: managed_instance_group.py
    properties:
      region: us-central1
      autoscaler:
        cpuUtilization:
          utilizationTarget: 0.7
      targetSize: 3
      instanceTemplate:
        diskImage: projects/ubuntu-os-cloud/global/images/family/ubuntu-1804-lts
        network: default
        machineType: f1-micro
      healthChecks:
        - initialDelaySec: 500
          healthCheck: <FIXME:healthCheckUri>
